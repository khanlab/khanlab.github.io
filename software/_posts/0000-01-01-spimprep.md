---
# Fields can be left blank!
name: SPIMprep
authors:
  - Ali Khan
short_description: A Snakemake+SnakeBIDS workflow for pre-processing single plane illumination microscopy (SPIM, aka lightsheet microscopy).
image: /assets/images/software/placeholder.png
badges:
  - name: documentation
    icon: https://img.shields.io/badge/docs-github-blue
    url: https://github.com/khanlab/SPIMprep/tree/main/docs

  - name: version
    icon: https://img.shields.io/github/v/tag/khanlab/SPIMprep?label=version
    url: https://github.com/khanlab/SPIMprep

  - name: github
    icon: https://img.shields.io/github/stars/khanlab/SPIMprep?style=social
    url: https://github.com/khanlab/SPIMprep

# page settings:
layout: post
---

SPIMprep is a Snakemake+SnakeBIDS workflow for pre-processing single plane illumination microscopy (SPIM, aka lightsheet microscopy). It takes TIF images (tiled or prestitched) and outputs a validated BIDS Microscopy dataset, with a multi-channel multi-scale OME-Zarr file for each scan, along with downsampled nifti images.

## Supported inputs:

SPIMprep supports a range of inputs, with the type of acquisition specified by including the short-hand name as a substring in the acquisition tag:
- **`blaze`**: Raw Ultramicroscope Blaze OME TIFF files, either as 2D or 3D TIFF files
- **`prestitched`**: Prestitched images, as a stack of 2D TIF files (e.g. from LifeCanvas)
- **`imaris`**: Prestitched into a single Imaris (.ims) file

## Installation

SPIMprep requires the Pixi package manager. After installing Pixi, clone the repository and install dependencies:

```bash
git clone https://github.com/khanlab/spimprep SPIMprep
cd SPIMprep
pixi install
pixi shell
```

## Usage

Run the workflow using the `run.py` script:

```bash
./run.py --input-path /path/to/data/ --subject M4A1Te3 --stains Abeta PI Lectin --output-bids-dir /path/to/output --work-dir /tmp --cores all --use-conda
```

The `--input-path` should be a folder with a sample's tif files, or a tar file containing the tif files. The acquisition value must contain one of `blaze`, `imaris` or `prestitched` to define which workflow will be used.

**Full Documentation:** [here](https://github.com/khanlab/SPIMprep/tree/main/docs){:target="\_blank"}